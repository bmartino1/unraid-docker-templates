<?xml version="1.0"?>
<Container version="2">
  <Name>dbrepair</Name>
  <Repository>bmmbmm01/plex-dbrepair</Repository>
  <Registry>https://hub.docker.com/r/bmmbmm01/plex-dbrepair</Registry>
  <Network>none</Network>
  <MyIP/>
  <Shell>bash</Shell>
  <Privileged>false</Privileged>
  <Support>https://forums.unraid.net/topic/196453-support-plex-db-repair-docker/</Support>
  <Project>https://github.com/bmartino1/plex-dbrepair-docker</Project>
  <ReadMe>https://github.com/ChuckPa/DBRepair/blob/master/README.md</ReadMe>
  <Overview>You will mount the Plex Media Server directory into this container&#13;
(usually something like /path/to/plex/Library/Application Support/Plex Media Server)&#13;
&#13;
The script runs once automagaicaly and reapirs the Pex Database and then Exits/Stops the Docker&#13;
&#13;
No Plex docker or process is running while repair is happening!&#13;
&#13;
Check the logs, or manual excute option and console in the docker and run top to confirm its running!</Overview>
  <Category>Tools: MediaApp:Other</Category>
  <WebUI/>
  <TemplateURL/>
  <Icon>https://raw.githubusercontent.com/linuxserver/docker-templates/master/linuxserver.io/img/plex-logo.png</Icon>
  <ExtraParams>--hostname  dbrepair </ExtraParams>
  <PostArgs/>
  <CPUset/>
  <DateInstalled>1768267381</DateInstalled>
  <DonateText/>
  <DonateLink/>
  <Requires>YOUR ARE ULTIMATELY RESPONSILBE FOR YOUR DATA! PLEX MUST BE OFF!!! You must mount the  Plex Media Server folder!</Requires>
  <Config Name="Plex Database Folder" Target="/plexmediaserver" Default="/path/to/plex showing/Library/" Mode="rw" Description="Path to the nested Plex Media Server folder that holds the Plex Structure... YOUR APPDATA FOLDER!" Type="Path" Display="always" Required="true" Mask="false">/mnt/user/appdata/plex/</Config>
  <Config Name="DBREPAIR_MODE" Target="DBREPAIR_MODE" Default="automatic" Mode="" Description="DBREPAIR_MODE per script:&#13;&#10;automatic &#x2013; Full one-shot flow (backup &#x2192; check &#x2192; repair(vacuum) &#x2192; reindex)&#13;&#10;check &#x2013; SQLite integrity check only&#13;&#10;vacuum &#x2013; VACUUM databases (frees space, no reindex)&#13;&#10;repair &#x2013; Alias for VACUUM (SQLite-level repair)&#13;&#10;reindex &#x2013; Rebuild database indexes&#13;&#10;deflate &#x2013; VACUUM INTO (rewrites DB to minimum size)&#13;&#10;prune &#x2013; Remove old PhotoTranscoder cache files only&#13;&#10;manual &#x2013; Drop into an interactive shell (no automatic actions)" Type="Variable" Display="always" Required="true" Mask="false">automatic</Config>
  <Config Name="ALLOW_PLEX_KILL" Target="ALLOW_PLEX_KILL" Default="true" Mode="" Description="If enabled, the container will stop running Plex containers before database operations begin.&#13;&#10;Requires /var/run/docker.sock to be mounted." Type="Variable" Display="always" Required="true" Mask="false">true</Config>
  <Config Name="PLEX_CONTAINER_MATCH" Target="PLEX_CONTAINER_MATCH" Default="plex" Mode="" Description="Pattern used to identify Plex containers to stop by name or image when stopping/starting containers. Matches against both container name and image!" Type="Variable" Display="always" Required="true" Mask="false">plex</Config>
  <Config Name="RESTART_PLEX" Target="RESTART_PLEX" Default="true" Mode="" Description="T/F start plex docker after repair" Type="Variable" Display="always" Required="true" Mask="false">true</Config>
  <Config Name="PRUNE_DAYS" Target="PRUNE_DAYS" Default="30" Mode="" Description="Files older than this number of days will be removed from the PhotoTranscoder cache when using DBREPAIR_MODE=prune." Type="Variable" Display="always" Required="false" Mask="false">30</Config>
  
  <Config Name="EXCLUDE_IMAGE_REGEX"
          Target="EXCLUDE_IMAGE_REGEX"
          Default="plex-dbrepair"
          Mode=""
          Description="Image regex to avoid killing self"
          Type="Variable"
          Display="advanced-hide"
          Required="true"
          Mask="false">plex-dbrepair</Config>

  <Config Name="Docker Run Socket"
          Target="/var/run/docker.sock"
          Default="/var/run/docker.sock"
          Mode="rw"
          Description="Required to manage Plex containers from Unraid"
          Type="Path"
          Display="advanced-hide"
          Required="true"
          Mask="false">/var/run/docker.sock</Config>

  <TailscaleStateDir/>
</Container>
