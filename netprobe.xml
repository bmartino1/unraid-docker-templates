<?xml version="1.0"?>
<Container version="2">
  <Name>NetProbe</Name>
  <Repository>bmmbmm01/netprobe:postgres16</Repository>
  <Registry>https://hub.docker.com/r/bmmbmm01/netprobe</Registry>
  <Network>bridge</Network>
  <MyIP/>
  <Shell>bash</Shell>
  <Privileged>false</Privileged>
  <Support>https://forums.unraid.net/topic/195469-support-netprobe</Support>
  <Project>https://github.com/bmartino1/NetProbe_Python</Project>
  <ReadMe/>
  <Overview>Netprobe 2.0 &#x2013; Internet Quality Dashboard&#13;
&#13;
Netprobe 2.0 is a lightweight, container-friendly network probe and web UI for home / lab internet monitoring.&#13;
&#13;
It periodically:&#13;
&#13;
Pings your gateway, router and a list of &#x201C;anchor&#x201D; sites.&#13;
Measures packet loss, latency and jitter.&#13;
Measures DNS lookup latency per DNS server.&#13;
Runs scheduled and manual Speedtest.net tests.&#13;
Stores everything in SQLite and renders a dark-mode dashboard with Chart.js.&#13;
The goal is a simple &#x201C;drop in and forget it&#x201D; quality monitor that you can run on Unraid, Proxmox, Docker, etc.&#13;
&#13;
Adational Varbales can be found here: https://github.com/bmartino1/NetProbe_Python&#13;
&#13;
Optional data:&#13;
ALL are OPTIONAL! Defaults/falbacks to sqlite&#13;
&#13;
# Optional: if ping needs extra caps in your environment&#13;
--cap-add=NET_RAW --cap-add=NET_ADMIN --cap-add=SYS_ADMIN&#13;
&#13;
&#13;
#Use standalone Postgres for backend storage  docker variables...&#13;
&#13;
(May be hidden in tempalte)&#13;
USE_POSTGRES: ${USE_POSTGRES:-true}&#13;
DB_ENGINE: ${DB_ENGINE:-postgres}&#13;
      &#13;
# Postgres connection details (match the postgres service above via env file...)&#13;
&#13;
POSTGRES_HOST: ${POSTGRES_HOST:-postgres}&#13;
POSTGRES_PORT: ${POSTGRES_PORT:-5432}&#13;
POSTGRES_DB: ${POSTGRES_DB:-netprobe}&#13;
POSTGRES_USER: ${POSTGRES_USER:-netprobe}&#13;
POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-netprobe}</Overview>
  <Category>Tools:Utilities Network:Web Network:DNS Network:Other</Category>
  <WebUI>http://[IP]:[PORT:8080]</WebUI>
  <TemplateURL>https://raw.githubusercontent.com/bmartino1/unraid-docker-templates/main/netprobe.xml</TemplateURL>
  <Icon>https://github.com/bmartino1/unraid-docker-templates/blob/main/images/netprobe.png?raw=true</Icon>
  <ExtraParams/>
  <PostArgs/>
  <CPUset/>
  <DateInstalled>1767675773</DateInstalled>
  <DonateText/>
  <DonateLink/>
  <Requires>ALL are OPTIONAL! Defaults/falbacks to sqlite&#13;
&#13;
# Optional: if ping needs extra caps in your environment&#13;
--cap-add=NET_RAW --cap-add=NET_ADMIN --cap-add=SYS_ADMIN&#13;
&#13;
&#13;
#Use standalone Postgres for backend storage  docker variables...&#13;
&#13;
USE_POSTGRES: ${USE_POSTGRES:-true}&#13;
DB_ENGINE: ${DB_ENGINE:-postgres}&#13;
      &#13;
# Postgres connection details (match the postgres service above via env file...)&#13;
&#13;
POSTGRES_HOST: ${POSTGRES_HOST:-postgres}&#13;
POSTGRES_PORT: ${POSTGRES_PORT:-5432}&#13;
POSTGRES_DB: ${POSTGRES_DB:-netprobe}&#13;
POSTGRES_USER: ${POSTGRES_USER:-netprobe}&#13;
POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-netprobe}</Requires>
  <Config Name="DockerNatPort" Target="8080" Default="8080" Mode="tcp" Description="" Type="Port" Display="always" Required="true" Mask="false">8080</Config>
  <Config Name="Database path" Target="/data/" Default="/mnt/user/appdata/netprobe_database" Mode="rw" Description="container /data location for sq lite file that holds long term data.&#13;&#10;Container path can be changed if DB_PATH varable is assigned. DB_PATH defaults to /data/netprobe.sqlite" Type="Path" Display="always" Required="true" Mask="false">/mnt/user/appdata/netprobe_database</Config>
  <Config Name="PROBE_INTERVAL" Target="PROBE_INTERVAL" Default="30" Mode="" Description="Seconds between script probe runs. (coutdown in web page) this runs teh pings, dns lookups and other to colect data..." Type="Variable" Display="always" Required="true" Mask="false">30</Config>
  <Config Name="PING_COUNT" Target="PING_COUNT" Default="20" Mode="" Description="ICMP packets per target per probe." Type="Variable" Display="always-hide" Required="true" Mask="false">4</Config>
  <Config Name="APP_TIMEZONE" Target="APP_TIMEZONE" Default="UTC" Mode="" Description="Time Zone eg America/Chicago" Type="Variable" Display="always" Required="true" Mask="false">UTC</Config>
  <Config Name="SITES" Target="SITES" Default="fast.com,google.com,youtube.com" Mode="" Description="Comma-separated ping targets." Type="Variable" Display="always" Required="true" Mask="false">fast.com,google.com,youtube.com</Config>
  <Config Name="ROUTER_IP" Target="ROUTER_IP" Default="192.168.1.1" Mode="" Description="Optional LAN router IP...Your Router/Gateway IP address to help with pings Can leave blank...(to leave blank delete this variable)" Type="Variable" Display="always" Required="true" Mask="false">192.168.1.1</Config>
  <Config Name="DNS_TEST_SITE" Target="DNS_TEST_SITE" Default="google.com" Mode="" Description="Domain for DNS latency tests." Type="Variable" Display="always" Required="true" Mask="false">google.com</Config>
  <Config Name="DNS_NAMESERVER_4" Target="DNS_NAMESERVER_4" Default="My_DNS_Server" Mode="" Description="Web UI Display Name" Type="Variable" Display="always" Required="false" Mask="false">My_DNS_Server</Config>
  <Config Name="DNS_NAMESERVER_4_IP" Target="DNS_NAMESERVER_4_IP" Default="192.168.1.1" Mode="" Description="DNS IPs to probe. Do you run a custom dns server set this to that ip" Type="Variable" Display="always" Required="true" Mask="false">192.168.1.1</Config>
  <Config Name="SPEEDTEST_ENABLED" Target="SPEEDTEST_ENABLED" Default="True" Mode="" Description="Enable periodic speedtests. at SPEEDTEST_INTERVAL in seconds" Type="Variable" Display="always" Required="true" Mask="false">True</Config>
  <Config Name="SPEEDTEST_INTERVAL" Target="SPEEDTEST_INTERVAL" Default="14400" Mode="" Description="14400 seconds = 4 Hours. Seconds between automatic speedtests." Type="Variable" Display="always" Required="true" Mask="false">14400</Config>
  <Config Name="DNS_NAMESERVER_1" Target="DNS_NAMESERVER_1" Default="Google_DNS" Mode="" Description="Google_DNS" Type="Variable" Display="always-hide" Required="false" Mask="false">Google_DNS</Config>
  <Config Name="DNS_NAMESERVER_1_IP" Target="DNS_NAMESERVER_1_IP" Default="8.8.8.8" Mode="" Description="Google_DNS 8.8.8.8" Type="Variable" Display="always-hide" Required="false" Mask="false">8.8.8.8</Config>
  <Config Name="DNS_NAMESERVER_2" Target="DNS_NAMESERVER_2" Default="Quad9_DNS" Mode="" Description="Quad9_DNS" Type="Variable" Display="always-hide" Required="false" Mask="false">Quad9_DNS</Config>
  <Config Name="DNS_NAMESERVER_2_IP" Target="DNS_NAMESERVER_2_IP" Default="9.9.9.9" Mode="" Description="Quad9_DNS 9.9.9.9" Type="Variable" Display="always-hide" Required="false" Mask="false">9.9.9.9</Config>
  <Config Name="DNS_NAMESERVER_3" Target="DNS_NAMESERVER_3" Default="CloudFlare_DNS" Mode="" Description="CloudFlare_DNS" Type="Variable" Display="always-hide" Required="false" Mask="false">CloudFlare_DNS</Config>
  <Config Name="DNS_NAMESERVER_3_IP" Target="DNS_NAMESERVER_3_IP" Default="1.1.1.1" Mode="" Description="CloudFlare_DNS 1.1.1.1" Type="Variable" Display="always-hide" Required="false" Mask="false">1.1.1.1</Config>
  <Config Name="USE_POSTGRES" Target="USE_POSTGRES" Default="true" Mode="" Description="requires DB_ENGINE set to postgres&#13;&#10;#Use a standalone Postgres and set needed postgres docker variables... manual add" Type="Variable" Display="always-hide" Required="true" Mask="false">false</Config>
  <Config Name="DB_ENGINE" Target="DB_ENGINE" Default="postgres" Mode="" Description="chose database backend if using postgres set USE_POSTGRES true as well" Type="Variable" Display="always" Required="true" Mask="false">sqlite</Config>
  <Config Name="WEIGHT_LOSS" Target="WEIGHT_LOSS" Default="-0.6" Mode="" Description="Weight of packet loss in score (0&#x2013;1, sum = 1)." Type="Variable" Display="advanced-hide" Required="false" Mask="false">-0.6</Config>
  <Config Name="WEIGHT_LATENCY" Target="WEIGHT_LATENCY" Default="0.15" Mode="" Description="Weight of latency." Type="Variable" Display="advanced-hide" Required="false" Mask="false">0.15</Config>
  <Config Name="WEIGHT_JITTER" Target="WEIGHT_JITTER" Default="0.2" Mode="" Description="Weight of jitter." Type="Variable" Display="advanced-hide" Required="false" Mask="false">0.2</Config>
  <Config Name="WEIGHT_DNS_LATENCY" Target="WEIGHT_DNS_LATENCY" Default="0.05" Mode="" Description="Weight of DNS latency." Type="Variable" Display="advanced-hide" Required="false" Mask="false">0.05</Config>
  <Config Name="THRESHOLD_LOSS" Target="THRESHOLD_LOSS" Default="5" Mode="" Description="Loss % considered &#x201C;max bad&#x201D; for scoring." Type="Variable" Display="advanced-hide" Required="false" Mask="false">5</Config>
  <Config Name="THRESHOLD_LATENCY" Target="THRESHOLD_LATENCY" Default="100" Mode="" Description="Latency ms considered &#x201C;max bad&#x201D;." Type="Variable" Display="advanced-hide" Required="false" Mask="false">100</Config>
  <Config Name="THRESHOLD_JITTER" Target="THRESHOLD_JITTER" Default="30" Mode="" Description="Jitter ms considered &#x201C;max bad&#x201D;." Type="Variable" Display="advanced-hide" Required="false" Mask="false">30</Config>
  <Config Name="THRESHOLD_DNS_LATENCY" Target="THRESHOLD_DNS_LATENCY" Default="100" Mode="" Description="DNS ms considered &#x201C;max bad&#x201D;." Type="Variable" Display="advanced-hide" Required="false" Mask="false">100</Config>
  <Config Name="WEB_PORT" Target="WEB_PORT" Default="8080" Mode="" Description="This sets the python webserver port... If edited update docker nat ports and WebUI URL" Type="Variable" Display="advanced-hide" Required="true" Mask="false">8080</Config>
  <Config Name="TailScale Fallback State Directory" Target="CA_TS_FALLBACK_DIR" Default="/data/" Mode="{3}" Description="Fallback container directory for tailscale state information - Added By Community Applications" Type="Variable" Display="advanced" Required="{7}" Mask="{8}">/data/</Config>
  <TailscaleStateDir/>
</Container>
